# ZCO v0.6.0 版本总结

## 📋 版本概述

**版本号**: v0.6.0  
**发布日期**: 2024-12-31  
**版本类型**: 优化版本（Optimization Release）

## 🎯 核心改进

### ucontext 实现架构优化

本次版本的核心改进是优化了 ucontext API 的实现架构，移除了实现层面的信号屏蔽处理，将信号管理职责交给调用者（调度器层）统一处理。

#### 主要变更

1. **`getcontext` 函数**
   - ❌ 移除: `pthread_sigmask` 系统调用
   - ✅ 保留: 寄存器保存、浮点寄存器保存
   - ✅ 新增: `uc_sigmask` 字段清零（由调用者设置）

2. **`setcontext` 函数**
   - ❌ 移除: `pthread_sigmask` 系统调用
   - ✅ 保留: 寄存器恢复、浮点寄存器恢复
   - ✅ 改进: 信号掩码恢复由调用者处理

3. **架构优势**
   - 📈 **性能**: 每次上下文切换减少 2 次系统调用
   - 🏗️ **架构**: 职责分离，代码更清晰
   - 🔧 **维护**: 信号处理逻辑集中在调度器层

## 📊 性能提升

| 指标 | 改进 |
|------|------|
| 上下文切换系统调用 | 减少 2 次/切换 |
| 代码路径复杂度 | 降低 |
| 架构清晰度 | 提升 |

## ✅ 兼容性

- **API 兼容**: 完全兼容，无需修改代码
- **行为兼容**: 功能行为与 v0.5.0 一致
- **二进制兼容**: 可以无缝升级

## 📦 升级步骤

```bash
# 1. 拉取新版本
git pull origin main
git checkout 0.6.0

# 2. 重新构建
zig build

# 3. 运行测试（如需要）
zig build test
```

## 📚 文档更新

- ✅ `README.md` - 更新版本信息和特性说明
- ✅ `docs/CHANGELOG.md` - 添加 v0.6.0 变更记录
- ✅ `docs/UCONTEXT_IMPLEMENTATION.md` - 更新实现文档
- ✅ `docs/VERSION_0.6.0.md` - 完整版本发布说明
- ✅ `docs/VERSION_0.6.0_SUMMARY.md` - 本版本总结

## 🔗 相关链接

- [完整发布说明](./VERSION_0.6.0.md)
- [变更日志](./CHANGELOG.md)
- [ucontext 实现文档](./UCONTEXT_IMPLEMENTATION.md)

## 🙏 致谢

感谢所有为 ZCO 项目做出贡献的开发者和用户。

---

**快速参考**:  
- 版本号: `0.6.0`  
- Git Tag: `0.6.0`  
- 主要改进: ucontext 实现优化

