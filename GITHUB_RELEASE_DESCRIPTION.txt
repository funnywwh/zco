ZCO 0.4.0 - Performance Optimization Release

A major performance update with significant improvements to scheduler efficiency, memory management, and HTTP processing.

âš¡ Key Improvements

â€¢ 50% better performance in low-concurrency scenarios (surpassing Go by 14.5%)
â€¢ O(log n) â†’ O(1) scheduler efficiency improvement
â€¢ 50% memory reduction (8KB â†’ 4KB stack size)
â€¢ Three-level pooling architecture for efficient resource management

ğŸ“Š Performance Benchmarks

| Test Case | ZCO RPS | Benchmark |
|-----------|---------|-----------|
| 1000 req, 10 con | 44,308 | +14.5% vs Go |
| 10k req, 100 con | 44,944 | Competitive |
| 50k req, 500 con | 43,646 | Competitive |
| 100k req, 1000 con | 36,938 | Competitive |

ğŸ”§ Major Features

Scheduler Optimizations
â€¢ ArrayList-based scheduling (O(1) insertion)
â€¢ Dynamic batch processing (16-128 coroutines/batch)
â€¢ Optimized signal handling to reduce system calls
â€¢ Stack size optimization (8KB â†’ 4KB)

Memory Management
â€¢ Memory pool (1000 Ã— 1KB blocks for fast allocation)
â€¢ Coroutine pool (500 coroutine objects for reuse)
â€¢ Connection pool (200 TCP connections for reuse)
â€¢ Memory alignment optimization for better cache performance

Network Optimizations
â€¢ TCP_NODELAY to reduce latency
â€¢ Connection pooling for efficient TCP connection reuse
â€¢ Optimized io_uring configuration

HTTP Performance
â€¢ SIMD-accelerated string matching (16-byte vectorized)
â€¢ Pre-compiled HTTP responses
â€¢ 1000-entry response cache
â€¢ Zero-copy buffer mechanism
â€¢ Direct byte comparison instead of indexOf

System Optimizations
â€¢ Branch prediction hints for critical paths
â€¢ CPU affinity interface (simplified)
â€¢ NUMA optimization interface (simplified)

ğŸ¯ What This Means for You

If you're using ZCO for:
â€¢ High-throughput applications: You'll see significant RPS improvements
â€¢ Low-latency requirements: Network optimizations reduce response times
â€¢ Memory-constrained environments: 50% reduction in memory footprint
â€¢ Concurrent workloads: Better scheduler performance under load

ğŸ“¦ Installation

zig build

Or using the tag:

git checkout 0.4.0
zig build

ğŸ”„ Upgrade Notes

No breaking changes. This is a performance-focused release maintaining full API compatibility. Existing applications will benefit from automatic performance improvements without any code changes.

ğŸ“ Complete Optimization List (18/20 completed)

âœ… ArrayList replaces PriorityQueue
âœ… Dynamic batch processing
âœ… Batch signal masking
âœ… Memory pool implementation
âœ… Coroutine pool implementation
âœ… Stack size reduction
âœ… Memory alignment
âœ… TCP_NODELAY
âœ… Connection pool
âœ… Direct byte comparison
âœ… Pre-compiled responses
âœ… HTTP response cache
âœ… Zero-copy buffer
âœ… SIMD string matching
âœ… Branch prediction
âœ… CPU affinity interface
âœ… NUMA optimization interface
âœ… Performance monitoring

ğŸ› Known Issues

â€¢ Performance is slightly lower than Go in extreme high-concurrency scenarios (1000+ concurrent)
â€¢ NUMA and CPU affinity optimizations are simplified versions

ğŸ”® What's Next

â€¢ Complete NUMA support
â€¢ True CPU affinity binding
â€¢ Smarter adaptive scheduling algorithms
â€¢ Distributed coroutine scheduling

For full details, see CHANGELOG_V0.4.0.md in the repository.
